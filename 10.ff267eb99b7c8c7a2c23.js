(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{so0S:function(e,t,s){"use strict";s.r(t),s.d(t,"SessoesModule",(function(){return J}));var o=s("ofXK"),a=s("tyNb"),r=s("fXoL"),i=s("iYDN"),n=s("Guef");const b=function(e){return[e,"edite"]};function c(e,t){if(1&e){const e=r.Qb();r.Pb(0,"tr"),r.Pb(1,"td"),r.tc(2),r.Ob(),r.Pb(3,"td"),r.tc(4),r.Ob(),r.Pb(5,"td"),r.Pb(6,"a",12),r.tc(7,"Editar"),r.Ob(),r.Pb(8,"button",13),r.Wb("click",(function(){r.lc(e);const s=t.$implicit;return r.Yb().Remova(s)})),r.tc(9,"Excluir"),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit;r.yb(2),r.uc(e.NomeDoCliente),r.yb(2),r.uc(e.dataDaSessao),r.yb(2),r.dc("routerLink",r.fc(3,b,e.id))}}let d=(()=>{class e{constructor(e){this.sessaoService=e,this.sessoes=[]}ngOnInit(){this.obtenhaTodas(1)}obtenhaTodas(e){this.sessaoService.getAll(e).subscribe(e=>{this.sessoes=e.Items,this.quantidadeTotalDeItens=e.TotalItems,this.pageSize=e.PageSize},e=>alert("erro ao carregar lista"))}Remova(e){this.sessaoService.delete(e.id).subscribe(()=>this.sessoes=this.sessoes.filter(t=>t!=e),()=>"Erro ao excluir sessao")}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(i.a))},e.\u0275cmp=r.Db({type:e,selectors:[["app-lista-sessoes"]],decls:26,vars:3,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col-md"],[1,"h2","border-left","pl-2"],["routerLink","novo",1,"btn","btn-success","float-right"],[1,"card"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[3,"totalDeItens","pageSize","aoMudarDePagina"],[1,"btn","btn-outline-info","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm","ml-2",3,"click"]],template:function(e,t){1&e&&(r.Pb(0,"nav"),r.Pb(1,"ol",0),r.Pb(2,"li",1),r.Pb(3,"a",2),r.tc(4,"Home"),r.Ob(),r.Ob(),r.Pb(5,"li",3),r.tc(6,"Sess\xf5es"),r.Ob(),r.Ob(),r.Ob(),r.Pb(7,"div",4),r.Pb(8,"div",5),r.Pb(9,"h1",6),r.tc(10," Sess\xf5es "),r.Ob(),r.Ob(),r.Pb(11,"div",5),r.Pb(12,"a",7),r.tc(13," + Nova Sess\xe3o "),r.Ob(),r.Ob(),r.Ob(),r.Pb(14,"div",8),r.Pb(15,"table",9),r.Pb(16,"thead"),r.Pb(17,"tr"),r.Pb(18,"th"),r.tc(19,"Cliente"),r.Ob(),r.Pb(20,"th"),r.tc(21,"Data Sess\xe3o"),r.Ob(),r.Kb(22,"th"),r.Ob(),r.Ob(),r.Pb(23,"tbody"),r.rc(24,c,10,5,"tr",10),r.Ob(),r.Ob(),r.Pb(25,"app-paginador",11),r.Wb("aoMudarDePagina",(function(e){return t.obtenhaTodas(e)})),r.Ob(),r.Ob()),2&e&&(r.yb(24),r.dc("ngForOf",t.sessoes),r.yb(1),r.dc("totalDeItens",t.quantidadeTotalDeItens||0)("pageSize",t.pageSize))},directives:[a.c,o.j,n.a],styles:[""]}),e})();var l=s("3Pt+"),u=s("aq40"),m=s("yrpv"),h=s("eIep"),p=s("hUol"),v=s.n(p),f=s("ct8N"),g=s("arFO"),O=s("eO1q");function S(e,t){1&e&&(r.Pb(0,"div"),r.tc(1,"Dado obrigat\xf3rio"),r.Ob())}function P(e,t){if(1&e&&(r.Pb(0,"div",23),r.rc(1,S,2,0,"div",24),r.Ob()),2&e){const e=r.Yb();r.yb(1),r.dc("ngIf",e.sessaoForm.get("clienteId").errors.required)}}function y(e,t){if(1&e&&(r.Pb(0,"li"),r.tc(1),r.Ob()),2&e){const e=t.$implicit;r.yb(1),r.vc(" ",e," ")}}function F(e,t){if(1&e&&(r.Pb(0,"div",25),r.Pb(1,"strong"),r.tc(2,"Erro no servidor"),r.Ob(),r.Pb(3,"ul"),r.rc(4,y,2,1,"li",26),r.Ob(),r.Ob()),2&e){const e=r.Yb();r.yb(4),r.dc("ngForOf",e.serverErrorMessages)}}const D=function(){return{width:"100%"}};let I=(()=>{class e{constructor(e,t,s,o,a){this.sessaoService=e,this.route=t,this.router=s,this.formBuilder=o,this.clienteService=a,this.serverErrorMessages=null,this.submittingForm=!1,this.sessao=new u.a,this.clientes=[],this.ptBR={firstDayOfWeek:0,dayNames:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],dayNamesMin:["Do","Se","Te","Qu","Qu","Se","Sa"],monthNames:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar"}}ngAfterContentChecked(){this.setPageTitle()}setPageTitle(){this.currentAction==m.a.pathNovo&&(this.pageTitle="Cadastro de novo sessao")}ngOnInit(){this.setCurrentAction(),this.buildSessaoForm(),this.loadSessao(),this.loadClientes()}loadClientes(){this.clienteService.getAll(1,500).subscribe(e=>this.clientes=e.Items.map(e=>new w(e.nome,e.id)))}setCurrentAction(){this.currentAction=this.route.snapshot.url[0].path==m.a.pathNovo?m.a.pathNovo:m.a.pathEdite}buildSessaoForm(){this.sessaoForm=this.formBuilder.group({id:["00000000-0000-0000-0000-000000000000"],clienteId:[0,[l.q.required]],dataDaSessao:[null,[l.q.required]]})}loadSessao(){this.currentAction==m.a.pathEdite&&this.route.paramMap.pipe(Object(h.a)(e=>this.sessaoService.getById(e.get("id")))).subscribe(e=>{this.sessao=e,this.sessao.dataDaSessao=e.dataDaSessao.substring(0,e.dataDaSessao.lastIndexOf("T")).split("-").reverse().join("/"),this.sessaoForm.patchValue(e)},e=>alert("Ocorreu um erro no servidor, por favor tente mais tarde."))}submitForm(){this.submittingForm=!0,this.currentAction==m.a.pathNovo?this.createSessao():this.updateSessao()}createSessao(){let e=Object.assign(new u.a,this.sessaoForm.value);e.dataDaSessao=e.dataDaSessao.split("/").reverse().join("-"),this.sessaoService.create(e).subscribe(e=>this.actionFormSuccess(e),e=>this.actionsFormError(e))}actionFormSuccess(e){v.a.success("Solicita\xe7\xe3o processada com sucesso!"),this.router.navigateByUrl("sessoes",{skipLocationChange:!0}).then(()=>this.router.navigate(["sessoes",e.id,m.a.pathEdite]))}actionsFormError(e){v.a.error("Ocorreu um erro ao processar sua solicita\xe7\xe3o!"),this.submittingForm=!1,this.serverErrorMessages=222===e.status?JSON.parse(e._body).errors:["Falha na comunica\xe7\xe3o com o servidor, por favor tente mais tarde!"]}updateSessao(){let e=Object.assign(new u.a,this.sessaoForm.value);e.dataDaSessao=e.dataDaSessao.split("/").reverse().join("-"),this.sessaoService.update(e).subscribe(e=>this.actionFormSuccess(e),e=>this.actionsFormError(e))}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(i.a),r.Jb(a.a),r.Jb(a.b),r.Jb(l.b),r.Jb(f.a))},e.\u0275cmp=r.Db({type:e,selectors:[["app-form-sessoes"]],decls:34,vars:15,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],["routerLink","/sessoes"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col-md"],[1,"h2","border-left","pl-2"],["routerLink","/sessoes",1,"btn","btn-light","float-right"],[3,"formGroup","submit"],[1,"card"],[1,"card-body"],[1,"form-row"],[1,"form-group","col-md-10"],["for","clienteId"],["placeholder","Selecione...","formControlName","clienteId","filter","true",3,"options"],["dd",""],["class","text-danger",4,"ngIf"],[1,"form-group","col-md-2"],["for","dataDaSessao"],["id","dataDaSessao","formControlName","dataDaSessao","inputStyleClass","form-control","dataType","string","dateFormat","dd/mm/yy",3,"locale","showButtonBar"],["class","alert alert-danger mt-4",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-lg","float-right","mt-3",3,"disabled"],[1,"text-danger"],[4,"ngIf"],[1,"alert","alert-danger","mt-4"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(r.Pb(0,"nav"),r.Pb(1,"ol",0),r.Pb(2,"li",1),r.Pb(3,"a",2),r.tc(4,"Home"),r.Ob(),r.Ob(),r.Pb(5,"li",1),r.Pb(6,"a",3),r.tc(7,"Sess\xf5es"),r.Ob(),r.Ob(),r.Pb(8,"li",4),r.tc(9),r.Ob(),r.Ob(),r.Ob(),r.Pb(10,"div",5),r.Pb(11,"div",6),r.Pb(12,"h1",7),r.tc(13),r.Ob(),r.Ob(),r.Pb(14,"div",6),r.Pb(15,"a",8),r.tc(16," Voltar "),r.Ob(),r.Ob(),r.Ob(),r.Pb(17,"form",9),r.Wb("submit",(function(){return t.submitForm()})),r.Pb(18,"div",10),r.Pb(19,"div",11),r.Pb(20,"div",12),r.Pb(21,"div",13),r.Pb(22,"label",14),r.tc(23,"Cliente"),r.Ob(),r.Kb(24,"p-dropdown",15,16),r.rc(26,P,2,1,"div",17),r.Ob(),r.Pb(27,"div",18),r.Pb(28,"label",19),r.tc(29,"Data da sess\xe3o"),r.Ob(),r.Kb(30,"p-calendar",20),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.rc(31,F,5,1,"div",21),r.Pb(32,"button",22),r.tc(33,"Salvar"),r.Ob(),r.Ob()),2&e&&(r.yb(9),r.uc(t.pageTitle),r.yb(4),r.vc(" ",t.pageTitle," "),r.yb(4),r.dc("formGroup",t.sessaoForm),r.yb(7),r.pc(r.ec(13,D)),r.dc("options",t.clientes),r.yb(2),r.dc("ngIf",t.sessaoForm.get("clienteId").invalid&&t.sessaoForm.get("clienteId").touched),r.yb(4),r.pc(r.ec(14,D)),r.dc("locale",t.ptBR)("showButtonBar",!0),r.yb(1),r.dc("ngIf",t.serverErrorMessages),r.yb(1),r.dc("disabled",t.submittingForm||t.sessaoForm.invalid))},directives:[a.c,l.s,l.k,l.d,g.a,l.j,l.c,o.k,O.a,o.j],styles:[""]}),e})();class w{constructor(e,t){this.label=e,this.value=t}}const N=[{path:"",component:d},{path:m.a.pathNovo,component:I},{path:":id/"+m.a.pathEdite,component:I}];let k=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[a.d.forChild(N)],a.d]}),e})();var C=s("9nqD"),T=s("PCNd"),E=s("vxfF");let J=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[o.b,k,l.o,l.f,C.b,O.b,T.a,E.d,g.b]]}),e})()}}]);